(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-50197536"],{"159b":function(e,t,r){var n=r("da84"),o=r("fdbc"),a=r("17c2"),i=r("9112");for(var s in o){var c=n[s],u=c&&c.prototype;if(u&&u.forEach!==a)try{i(u,"forEach",a)}catch(l){u.forEach=a}}},"17c2":function(e,t,r){"use strict";var n=r("b727").forEach,o=r("a640"),a=r("ae40"),i=o("forEach"),s=a("forEach");e.exports=i&&s?[].forEach:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}},"25f0":function(e,t,r){"use strict";var n=r("6eeb"),o=r("825a"),a=r("d039"),i=r("ad6d"),s="toString",c=RegExp.prototype,u=c[s],l=a((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),d=u.name!=s;(l||d)&&n(RegExp.prototype,s,(function(){var e=o(this),t=String(e.source),r=e.flags,n=String(void 0===r&&e instanceof RegExp&&!("flags"in c)?i.call(e):r);return"/"+t+"/"+n}),{unsafe:!0})},2612:function(e,t,r){"use strict";r.d(t,"c",(function(){return o})),r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return i}));var n=r("b775");function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/user/regi_u",method:"get",params:e})}function a(e){return Object(n["a"])({url:"/user/regi_u",method:"post",data:e})}function i(e){return Object(n["a"])({url:"/user/regi_u",method:"put",data:e})}},"2f67":function(e,t,r){"use strict";r("9026")},"3bbe":function(e,t,r){var n=r("861d");e.exports=function(e){if(!n(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},"3ca3":function(e,t,r){"use strict";var n=r("6547").charAt,o=r("69f3"),a=r("7dd0"),i="String Iterator",s=o.set,c=o.getterFor(i);a(String,"String",(function(e){s(this,{type:i,string:String(e),index:0})}),(function(){var e,t=c(this),r=t.string,o=t.index;return o>=r.length?{value:void 0,done:!0}:(e=n(r,o),t.index+=e.length,{value:e,done:!1})}))},"3f8c":function(e,t){e.exports={}},4160:function(e,t,r){"use strict";var n=r("23e7"),o=r("17c2");n({target:"Array",proto:!0,forced:[].forEach!=o},{forEach:o})},4364:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-main",[r("el-card",[r("el-button",{attrs:{icon:"el-icon-circle-plus-outline",type:"primary"},on:{click:e.addDialog}},[e._v("添加")]),r("el-dialog",{directives:[{name:"drag",rawName:"v-drag"}],attrs:{"close-on-click-modal":!1,visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("div",{staticClass:"dialog_header",attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.edit?"编辑角色":"添加新角色"))]),r("el-form",{ref:"roleForm",attrs:{"status-icon":"",model:e.roleForm,"label-width":"80px",rules:e.roleRules}},[r("el-form-item",{attrs:{label:"角色名称",prop:"roleName"}},[r("el-input",{model:{value:e.roleForm.roleName,callback:function(t){e.$set(e.roleForm,"roleName",t)},expression:"roleForm.roleName"}})],1),r("el-form-item",{attrs:{label:"角色权限",prop:"power"}},[r("el-checkbox-group",{model:{value:e.roleForm.powers,callback:function(t){e.$set(e.roleForm,"powers",t)},expression:"roleForm.powers"}},e._l(e.allPowers,(function(t){return r("el-checkbox",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.name))])})),1)],1),r("el-form-item",{attrs:{label:"具体描述",prop:"describe"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.roleForm.describe,callback:function(t){e.$set(e.roleForm,"describe",t)},expression:"roleForm.describe"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e.edit?r("el-button",{attrs:{type:"primary"},on:{click:e.editRole}},[e._v("确定修改")]):r("el-button",{attrs:{type:"primary"},on:{click:e.addRole}},[e._v("确 定")])],1)],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{stripe:"","element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)","header-cell-style":{"background-color":"#eeeeee","text-align":"center","font-size":"18px","border-right":"1px solid #b8b8b8"},border:"",data:e.tableData.data,"cell-style":{"text-align":"center"}},on:{"selection-change":e.handleSelectionChange}},[r("el-table-column",{attrs:{prop:"_id",label:"用户id","min-width":"120"}}),r("el-table-column",{attrs:{prop:"nickname",label:"客户方","min-width":"140"}}),r("el-table-column",{attrs:{prop:"username",label:"账号","min-width":"140"}}),r("el-table-column",{attrs:{prop:"email",label:"邮箱","min-width":"140"}}),r("el-table-column",{attrs:{prop:"power",label:"开放权限","min-width":"160"}}),r("el-table-column",{attrs:{label:"操作","min-width":"185"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(r){return e.editDialog(t.row)}}},[e._v("编辑")]),r("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(r){return e.removeBox(t.row._id)}}},[e._v("删除")])]}}])})],1),r("el-pagination",{attrs:{"current-page":e.params.page,"page-sizes":[5,10,20],"page-size":e.params.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.tableData.count},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},o=[],a=(r("4de4"),r("d81d"),r("d3b7"),r("25f0"),r("96cf"),r("1da1")),i=(r("b1ef"),r("2612")),s={data:function(){return{visible:!1,dialogVisible:!1,edit:!1,loading:!1,tableData:{count:0,data:[]},roleForm:{roleName:null,powers:[],describe:null},params:{page:1,pageSize:10},roleRules:{},deleteBox:null,allPowers:[{name:"内部系统",value:"/insys"},{name:"社区系统",value:"/outsys"},{name:"用户",value:"/users"},{name:"入库",value:"/putIn"},{name:"出库",value:"/putOut"},{name:"调拨",value:"/allo"}]}},mounted:function(){this.init(this.params)},methods:{init:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var n,o,a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.loading=!0,r.next=3,Object(i["c"])(e);case 3:n=r.sent,o=n.results,a=o.count,s=o.data,t.tableData={count:a,data:s},t.loading=!1;case 9:case"end":return r.stop()}}),r)})))()},addDialog:function(){this.edit=!1,this.dialogVisible=!0},editDialog:function(e){this.edit=!0,this.roleForm=e,this.dialogVisible=!0},removeBox:function(e){var t=this;this.$messageBox.alert("是否确认删除该角色","提示",{confirmButtonText:"确定",callback:function(){var r=Object(a["a"])(regeneratorRuntime.mark((function r(n){var o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,deleteRole(e);case 2:o=r.sent,200===o.status?(t.init(),t.$message({type:"success",message:"删除成功"})):(t.init(),t.$message({type:"warn",message:"操作过程出现问题"}));case 4:case"end":return r.stop()}}),r)})));function n(e){return r.apply(this,arguments)}return n}()})},deleteRoles:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.deleteBox.map((function(e){return e._id})),t.next=3,deleteRoles(r);case 3:n=t.sent,n=n.filter((function(e){return 200!=e.status})),0===n.length?e.$message({type:"success",message:"删除成功"}):e.$message({type:"warn",message:"操作过程出现问题"}),e.init(e.params),e.visible=!1;case 8:case"end":return t.stop()}}),t)})))()})),addRole:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,addRole(e.roleForm);case 2:r=t.sent,200===r.status?(e.$message({type:"success",message:"添加成功"}),e.init()):e.$message({type:"warn",message:"操作过程出现问题"}),e.init(e.params),e.dialogVisible=!1;case 6:case"end":return t.stop()}}),t)})))()})),editRole:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,editRole(e.roleForm);case 2:r=t.sent,200===r.status?(e.$message({type:"success",message:"修改成功"}),e.init()):e.$message({type:"warn",message:"操作过程出现问题"}),e.dialogVisible=!1;case 5:case"end":return t.stop()}}),t)})))()})),handleSizeChange:function(e){this.params.pageSize=e,this.params.page=1,this.init(this.params)},handleCurrentChange:function(e){this.params.page=e,this.init(this.params)},handleSelectionChange:function(e){console.log(e),this.deleteBox=e}}},c=s,u=(r("2f67"),r("2877")),l=Object(u["a"])(c,n,o,!1,null,"4c087fa8",null);t["default"]=l.exports},"4de4":function(e,t,r){"use strict";var n=r("23e7"),o=r("b727").filter,a=r("1dde"),i=r("ae40"),s=a("filter"),c=i("filter");n({target:"Array",proto:!0,forced:!s||!c},{filter:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},"7dd0":function(e,t,r){"use strict";var n=r("23e7"),o=r("9ed3"),a=r("e163"),i=r("d2bb"),s=r("d44e"),c=r("9112"),u=r("6eeb"),l=r("b622"),d=r("c430"),f=r("3f8c"),p=r("ae93"),g=p.IteratorPrototype,m=p.BUGGY_SAFARI_ITERATORS,b=l("iterator"),h="keys",v="values",y="entries",x=function(){return this};e.exports=function(e,t,r,l,p,w,S){o(r,t,l);var _,k,O,R=function(e){if(e===p&&A)return A;if(!m&&e in T)return T[e];switch(e){case h:return function(){return new r(this,e)};case v:return function(){return new r(this,e)};case y:return function(){return new r(this,e)}}return function(){return new r(this)}},L=t+" Iterator",j=!1,T=e.prototype,F=T[b]||T["@@iterator"]||p&&T[p],A=!m&&F||R(p),E="Array"==t&&T.entries||F;if(E&&(_=a(E.call(new e)),g!==Object.prototype&&_.next&&(d||a(_)===g||(i?i(_,g):"function"!=typeof _[b]&&c(_,b,x)),s(_,L,!0,!0),d&&(f[L]=x))),p==v&&F&&F.name!==v&&(j=!0,A=function(){return F.call(this)}),d&&!S||T[b]===A||c(T,b,A),f[t]=A,p)if(k={values:R(v),keys:w?A:R(h),entries:R(y)},S)for(O in k)(m||j||!(O in T))&&u(T,O,k[O]);else n({target:t,proto:!0,forced:m||j},k);return k}},9026:function(e,t,r){},"9ed3":function(e,t,r){"use strict";var n=r("ae93").IteratorPrototype,o=r("7c73"),a=r("5c6c"),i=r("d44e"),s=r("3f8c"),c=function(){return this};e.exports=function(e,t,r){var u=t+" Iterator";return e.prototype=o(n,{next:a(1,r)}),i(e,u,!1,!0),s[u]=c,e}},ae93:function(e,t,r){"use strict";var n,o,a,i=r("e163"),s=r("9112"),c=r("5135"),u=r("b622"),l=r("c430"),d=u("iterator"),f=!1,p=function(){return this};[].keys&&(a=[].keys(),"next"in a?(o=i(i(a)),o!==Object.prototype&&(n=o)):f=!0),void 0==n&&(n={}),l||c(n,d)||s(n,d,p),e.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:f}},b1ef:function(e,t,r){"use strict";r.d(t,"e",(function(){return o})),r.d(t,"a",(function(){return a})),r.d(t,"d",(function(){return i})),r.d(t,"f",(function(){return s})),r.d(t,"b",(function(){return c})),r.d(t,"c",(function(){return u}));r("4160"),r("d3b7"),r("3ca3"),r("159b"),r("ddb0");var n=r("b775");r("bc3a");function o(){return Object(n["a"])({url:"/global/charts",method:"get"})}function a(e){return Object(n["a"])({url:"/global/role",method:"post",data:e})}function i(e){return Object(n["a"])({url:"/global/role",method:"put",data:e})}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/global/role",method:"get",params:e})}function c(e){return Object(n["a"])({url:"/global/role",method:"delete",data:{_id:e}})}function u(e){var t=[];return e.forEach((function(e){t.push(Object(n["a"])({url:"/global/role",method:"delete",data:{_id:e}}))})),Promise.all(t)}},d2bb:function(e,t,r){var n=r("825a"),o=r("3bbe");e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,e.call(r,[]),t=r instanceof Array}catch(a){}return function(r,a){return n(r),o(a),t?e.call(r,a):r.__proto__=a,r}}():void 0)},d44e:function(e,t,r){var n=r("9bf2").f,o=r("5135"),a=r("b622"),i=a("toStringTag");e.exports=function(e,t,r){e&&!o(e=r?e:e.prototype,i)&&n(e,i,{configurable:!0,value:t})}},d81d:function(e,t,r){"use strict";var n=r("23e7"),o=r("b727").map,a=r("1dde"),i=r("ae40"),s=a("map"),c=i("map");n({target:"Array",proto:!0,forced:!s||!c},{map:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},ddb0:function(e,t,r){var n=r("da84"),o=r("fdbc"),a=r("e260"),i=r("9112"),s=r("b622"),c=s("iterator"),u=s("toStringTag"),l=a.values;for(var d in o){var f=n[d],p=f&&f.prototype;if(p){if(p[c]!==l)try{i(p,c,l)}catch(m){p[c]=l}if(p[u]||i(p,u,d),o[d])for(var g in a)if(p[g]!==a[g])try{i(p,g,a[g])}catch(m){p[g]=a[g]}}}},e163:function(e,t,r){var n=r("5135"),o=r("7b0b"),a=r("f772"),i=r("e177"),s=a("IE_PROTO"),c=Object.prototype;e.exports=i?Object.getPrototypeOf:function(e){return e=o(e),n(e,s)?e[s]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?c:null}},e177:function(e,t,r){var n=r("d039");e.exports=!n((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},e260:function(e,t,r){"use strict";var n=r("fc6a"),o=r("44d2"),a=r("3f8c"),i=r("69f3"),s=r("7dd0"),c="Array Iterator",u=i.set,l=i.getterFor(c);e.exports=s(Array,"Array",(function(e,t){u(this,{type:c,target:n(e),index:0,kind:t})}),(function(){var e=l(this),t=e.target,r=e.kind,n=e.index++;return!t||n>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==r?{value:n,done:!1}:"values"==r?{value:t[n],done:!1}:{value:[n,t[n]],done:!1}}),"values"),a.Arguments=a.Array,o("keys"),o("values"),o("entries")},fdbc:function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=chunk-50197536.066f630e.js.map